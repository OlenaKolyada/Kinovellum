# ADR-004: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö TMDb –≤ DynamoDB

**–°—Ç–∞—Ç—É—Å:** –ü—Ä–∏–Ω—è—Ç–æ  
**–î–∞—Ç–∞:** 2025-10-22  
**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∫—É—Ä—Å–∞

## 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø—Ä–æ–±–ª–µ–º–∞

"–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≥–æ–¥, —Ä–µ–∂–∏—Å—Å–µ—Ä, –ø–æ—Å—Ç–µ—Ä) –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Vulpecula, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ API, —Å–Ω–∏–∑–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏, —Å–æ–±–ª—é—Å—Ç–∏ –ª–∏–º–∏—Ç—ã TMDb API –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞?"

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –∑–Ω–∞—á–∏–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (ASR)

| ID —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è | –¢–µ–∫—Å—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è | –¢–∏–ø | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------------|------------------|-----|----------|
| PERF-003 | –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ —Ñ–∏–ª—å–º–∞ ‚â§500 –º—Å | –ù–§–¢ | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ |
| REL-002 | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ TMDb API | –ù–§–¢ | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ |
| COST-002 | –°–æ–±–ª—é–¥–µ–Ω–∏–µ rate limits TMDb API (50 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ –¥–ª—è free tier) | –ù–§–¢ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è TMDb |
| FUNC-001 | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –§–¢ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è |
| DATA-001 | –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) | –ù–§–¢ | –ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è |

## 3. –ê–Ω–∞–ª–∏–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ \ –†–µ—à–µ–Ω–∏–µ | –ó–∞–ø—Ä–æ—Å –∫ TMDb –∫–∞–∂–¥—ã–π —Ä–∞–∑ | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ (Redis) | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ DynamoDB |
|---------------------|-------------------------|------------------------------|------------------------|
| PERF-003 | ‚ùå 200-500–º—Å –Ω–∞ –∑–∞–ø—Ä–æ—Å | ‚úÖ ~10–º—Å | ‚úÖ ~15–º—Å |
| REL-002 | ‚ùå –ü–æ–ª–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | ‚ö†Ô∏è –¢–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ restart | ‚úÖ Persistent storage |
| COST-002 | ‚ùå –õ–µ–≥–∫–æ –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç | ‚úÖ –ú–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ | ‚úÖ –ú–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ |
| FUNC-001 | ‚úÖ | ‚úÖ | ‚úÖ |
| DATA-001 | ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ | ‚ö†Ô∏è –ù—É–∂–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è TTL | ‚ö†Ô∏è –ù—É–∂–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã | ‚úÖ $0 | ‚ö†Ô∏è $15-30/–º–µ—Å—è—Ü (Elasticache) | ‚úÖ –í —Ä–∞–º–∫–∞—Ö DynamoDB |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î |
| –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ö–æ–ª–æ–¥–Ω–æ–º —Å—Ç–∞—Ä—Ç–µ Lambda | ‚ùå | ‚ö†Ô∏è –ù—É–∂–µ–Ω warm-up | ‚úÖ –í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ |

## 4. –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ DynamoDB** —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π:

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**

* PK: MOVIE#tmdbId
* SK: METADATA
* Attributes:
  * title
  * originalTitle
  * releaseYear
  * director
  * genres
  * posterUrl
  * tmdbId
  * cachedAt (timestamp)
  * ttl (30 –¥–Ω–µ–π –¥–ª—è auto-cleanup)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç—ã (Cache-Aside Pattern):**

1. –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º DynamoDB
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ –∫—ç—à–∞
3. –ï—Å–ª–∏ –ù–ï –Ω–∞–π–¥–µ–Ω ‚Üí –∑–∞–ø—Ä–æ—Å –∫ TMDb API ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DynamoDB ‚Üí –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
4. TTL: 30 –¥–Ω–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π)

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**

* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ: –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–æ–∑—Ä–∞—Å—Ç –∫—ç—à–∞ (>30 –¥–Ω–µ–π ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
* –†—É—á–Ω–æ–µ: Admin API –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–µ

## 5. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–µ—à–µ–Ω–∏–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –≤—Å–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:

* **PERF-003**: –ß—Ç–µ–Ω–∏–µ –∏–∑ DynamoDB ~15–º—Å vs 200-500–º—Å –∑–∞–ø—Ä–æ—Å –∫ TMDb. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ
* **REL-002**: –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ TMDb API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ù–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç
* **COST-002**: –û–¥–∏–Ω —Ñ–∏–ª—å–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –∏–∑ TMDb —Ç–æ–ª—å–∫–æ 1 —Ä–∞–∑. –ü—Ä–∏ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ 100 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ TMDb vs 100,000 –±–µ–∑ –∫—ç—à–∞
* **FUNC-001**: –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –¥–∞–Ω–Ω—ã–º –æ —Ñ–∏–ª—å–º–∞—Ö (shared cache)
* **DATA-001**: TTL 30 –¥–Ω–µ–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–∑—É–º–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ TMDb API

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
* –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é DynamoDB)
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ DynamoDB TTL
* –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
* –£–ª—É—á—à–µ–Ω–∏–µ user experience (–±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫)

## 6. –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

* ‚úÖ **–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ:**
  * –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (15–º—Å vs 200-500–º—Å)
  * –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ TMDb API
  * –ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  * –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î)
  * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
  * –û–±—â–∏–π –∫—ç—à –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤)

* ‚ö†Ô∏è **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ:**
  * –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π (–¥–æ 30 –¥–Ω–µ–π)
  * –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –≤ DynamoDB (–Ω–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ)
  * –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–Ω—É–∂–µ–Ω –∑–∞–ø—Ä–æ—Å –∫ TMDb)
  * –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ TMDb API

* üîß **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  * ADR-002: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DynamoDB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—ç—à–∞
  * –¢—Ä–µ–±—É–µ—Ç—Å—è API key –¥–ª—è TMDb
  * –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ rate limits TMDb

## 7. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –°—Ç–∞—Ç—É—Å |
|------------|----------------|-----------|--------|
| PERF-003 | A/B —Ç–µ—Å—Ç: —Å –∫—ç—à–µ–º vs –±–µ–∑ –∫—ç—à–∞ | –° –∫—ç—à–µ–º: 15–º—Å, –±–µ–∑: 350–º—Å | ‚úÖ |
| REL-002 | –°–∏–º—É–ª—è—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ TMDb | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã | ‚úÖ |
| COST-002 | –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 7 –¥–Ω–µ–π) | 250 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ TMDb vs 7000 –±–µ–∑ –∫—ç—à–∞ | ‚úÖ |
| FUNC-001 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –í—Å–µ –≤–∏–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ | ‚úÖ |
| DATA-001 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –î–∞–Ω–Ω—ã–µ >30 –¥–Ω–µ–π –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è | ‚úÖ |